#!/usr/bin/python2.4
# vim:ts=4:sw=4

"""
create_python_dtd. Creat the POM DTD module for generating python XML trees.
This only needs to be run one time, at package installation. The content model
is ANY.
"""

import sys

import symbol, token

from pycopia.XML import pythonPOM
from pycopia import sourcegen


def create_python_dtd(argv):
    outfilename = pythonPOM.POM.get_mod_file("python")
    of = open(outfilename, "w")
    #cm = {"CONTENTMODEL":POM._ContentModelGenerator("ANY")}
    gen = sourcegen.SourceGen(of)
    gen.genComment("This file generated by a program. do not edit.")
    gen.genComment("Generated for Python version %s" % (sys.version))
    gen.genBlank()
    gen.genImport(pythonPOM)
    gen.genBlank()
    for nname in token.tok_name.values():
        gen.genClass(nname, (pythonPOM.TokenNode,))
    for nname in symbol.sym_name.values():
        gen.genClass(nname, (pythonPOM.SymbolNode,))
    of.close()


create_python_dtd(sys.argv)
